# Port 4000 Troubleshooting Guide

## Critical Server Startup Error: EADDRINUSE

**Error Message:** `Error: listen EADDRINUSE: address already in use 0.0.0.0:4000`

## Immediate Solutions

### 1. Kill Existing Process on Port 4000

#### Windows (PowerShell/Command Prompt)
```bash
# Find process using port 4000
netstat -ano | findstr :4000

# Kill the process (replace PID with actual process ID)
taskkill /PID <PID> /F
```

#### Quick Fix Scripts
- **Windows Batch:** `kill-port-4000.bat` (double-click to run)
- **PowerShell:** `kill-port-4000.ps1` (right-click → Run with PowerShell)

### 2. Verify Port is Free
```bash
netstat -ano | findstr :4000
# Should return nothing if port is free
```

## Root Causes

1. **Previous server process didn't terminate properly**
2. **Multiple instances trying to bind to same port**
3. **Nodemon restart conflict**
4. **System process occupying port 4000**
5. **IDE/terminal not properly closed**

## Preventive Measures Implemented

### Enhanced Server Error Handling
The server now includes robust error handling:
- Automatic detection of port conflicts
- Clear error messages with actionable steps
- Fallback to alternative ports
- Graceful shutdown handling

### Nodemon Configuration
- Added `nodemon.json` with proper settings
- 2-second delay to prevent rapid restarts
- Clean process management

## Quick Fix Command Sequence

```bash
# 1. Kill process on port 4000
taskkill /PID <PID> /F

# 2. Verify port is free
netstat -ano | findstr :4000

# 3. Restart your backend
cd backend
npm run dev
# or
npm start
```

## Alternative Solutions

### Use Different Port
If port 4000 continues to have issues:
1. Set `PORT=4001` in your `.env` file
2. Or use the automatic fallback (server will try PORT + 1)

### Clean Restart
1. Close all terminals/IDEs
2. Restart your development environment
3. Run `npm run dev` again

## Environment Variable Check

Ensure your `.env` file has:
```env
PORT=4000
NODE_ENV=development
```

## Nodemon Troubleshooting

If using nodemon:
1. Check for multiple nodemon instances
2. Use `rs` command in terminal to restart
3. Or kill nodemon and restart: `taskkill /IM node.exe /F`

## Success Indicators

✅ Server starts without errors
✅ Console shows: "Server is running in development mode on http://0.0.0.0:4000"
✅ No EADDRINUSE errors
✅ Port 4000 is available (netstat shows no processes)

## Need More Help?

If the issue persists:
1. Check Windows Event Viewer for system errors
2. Restart your computer
3. Check for antivirus/firewall interference
4. Verify no other applications are using port 4000

---
*Last updated: $(Get-Date)*
*Generated by: Port 4000 Troubleshooting System*


